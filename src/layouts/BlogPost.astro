---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";


export interface Props {
	content: {
		title: string;
		description: string;
		publishDate: string;
		heroImage?: {
			src: string;
			alt: string;
		};
	}
}

const { content: { title, description, publishDate, heroImage }, } = Astro.props as Props;

let allPosts = await Astro.glob('../pages/posts/**/*.md');
allPosts = allPosts
	.filter(post => !post.frontmatter.draft)
	.sort((a, b) =>
		new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf()
	);
let postsNumber = allPosts.length;
const thisUrl = new URL(Astro.request.url);
let nextUrl, nextTitle, prevUrl, prevTitle, addSlash = "";
for (let x = 0; x < postsNumber; x++) {
	if (thisUrl.pathname + addSlash === allPosts[x].url) {
		// console.log(allPosts[x].url);
		if (x > 0) {
			nextUrl = allPosts[x - 1].url;
			nextTitle = allPosts[x - 1].frontmatter.title;
		}
		if (x < postsNumber - 1) {
			prevUrl = allPosts[x + 1].url;
			prevTitle = allPosts[x + 1].frontmatter.title;
		}
	}
}

---


<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body class="z-50 bg-gray-900">
		
		<div class="sticky top-0 z-40 supports-backdrop-blur:bg-black/95 dark:bg-gray-900/75 backdrop-blur ">
			<Header />
		</div>
		 

		<div class="">

	
			<article>
				

				
								<header class="z-0 bg-indigo-900">


												 
											<div class="w-full mx-auto bg-gray-900 ">
												{heroImage && (
													<img
													class="z-0 mx-auto grayscale   md:aspect-[4/2]"
													width="840"
													height="420"
													// loading="lazy"
													src={heroImage.src}
													alt={heroImage.alt}
													/>
													)}
												
												<div class="md:w-[840px] mx-auto bg-red-400">
													<h1 class="z-40 max-w-4xl pt-8 pl-4 mx-auto text-4xl font-extrabold text-left text-white bg-indigo-900 pb-36">{title}</h1>
												</div>	
												
											</div>		
												
											</header>
											
											
											
											<main>
									<div class="z-50 p-4 mx-auto prose text-white bg-gray-800 border-l border-gray-200 -mt-28 border-opacity-5 lg:prose-xl">

									
												<!-- <time>{publishDate}</time> -->

												 
													<slot></slot>

											 

												 
													{nextTitle &&
													<p class="ctr prevnextP">
														Next: <a class="next" href={nextUrl}>{nextTitle}</a>
														</p>
													}
												{prevTitle &&
													<p class="ctr prevnextP">
														Previous: <a class="previous" href={prevUrl}>{prevTitle}</a>
														</p>
													}
												 

									</div>
								</main>

							</article>
							
						</div>

		
	

	<div class="">
		<Footer/>

	</div>


	</body>
</html>











<style>
 
	.title {
		font-size: 2.25rem;
		font-weight: 700;
	}
</style>
